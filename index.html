<!doctype html>
<html>
    <head>
	<title></title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="custom-proset.css"/>
	<!-- node_modules/jspdf/dist/ -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/canvg/3.0.7/umd.js"></script> -->
    </head>
    <body>
	<!-- Card for previewing result and moving things around -->
	<div id="main-container">
	    <div id="card-and-options-container">
		<div id="card-container">
		    <div class="card">
			<!-- <img draggable="false" alt="" id="card-background"/> -->
			<img width="100px" draggable="false" class="item" alt="" id="img-item-0" item-number="0"/>
			<img width="100px" draggable="false" class="item" alt="" id="img-item-1" item-number="1"/>
			<img width="100px" draggable="false" class="item" alt="" id="img-item-2" item-number="2"/>
			<img width="100px" draggable="false" class="item" alt="" id="img-item-3" item-number="3"/>
			<img width="100px" draggable="false" class="item" alt="" id="img-item-4" item-number="4"/>
			<img width="100px" draggable="false" class="item" alt="" id="img-item-5" item-number="5"/>
		    </div>
		</div>
		<!-- User Interface for choosing editing tool -->
		<div class="editing-tools">
		    <span id="scale-tool">Scale</span>
		    <span id="move-tool">Move</span>
		    <span id="redispose-tool">Auto-placement tool</span>
		</div>
	    </div>	<!-- User Interface for choosing parameters and items -->
	    <div class="ui">
		<h2>Proset Card Generator</h2>
		<!-- For an introduction to the game, <a href="https://en.wikipedia.org/wiki/Projective_Set_(game)">here</a>. To play the game, <a href="https://www.ocf.berkeley.edu/~dadams/proset/">here</a>. You can also look at the cards created by others in the <a href="gallery.php">gallery</a>. -->
		Show the <a href="#" onclick="showIntro()">introduction</a> again.
		<h3>Menu</h3>
		Save: <input class="input" type="button" id="save-input" value="Save"><br/>
		Load: <input class="file-input" type="file" id="load-input" name="load-input" value="Load">
		<h3>Cards</h3>
		<ul>
		    <li>Card dimension: <input id="card-width" type="number" value="64"/>mm x <input id="card-height" type="number" value="89"/>mm</li>
		    <li>Lines x columns: <input id="card-line-number" type="number" value="3"/>x<input id="card-column-number" type="number" value="2"/></li>
		    <li>Image filling: <input id="ratio-number" type="number" value="0.75" step="any" min="0" max="1"/></li>
		    <li>Background image: <input class="file-input" type="file" id="background-input"></li>
		    <li>Other side image: <input class="file-input" type="file" id="other-side-input"></li>
		</ul>
		<h3>Items</h3>
		Number of items : <input name="" type="number" value="6" id="n-item"/>.<!-- <br/> To find images, <a href="svgrepo.com">svgrepo</a> might be a good starting point. -->
		<ul id="list-inputs">
		    <li>
			Item 0: <input class="file-input" type="file" id="file0"><input name="" type="button" id="default-0" value="Default"/>
		    </li>
		    <li>
			Item 1: <input class="file-input" type="file" id="file1"><input name="" type="button" id="default-1" value="Default"/>
		    </li>
		    <li>
			Item 2: <input class="file-input" type="file" id="file2"><input name="" type="button" id="default-2" value="Default"/>
		    </li>
		    <li>
			Item 3: <input class="file-input" type="file" id="file3"><input name="" type="button" id="default-3" value="Default"/>
		    </li>
		    <li>
			Item 4: <input class="file-input" type="file" id="file4"><input name="" type="button" id="default-4" value="Default"/>
		    </li>
		    <li>
			Item 5: <input class="file-input" type="file" id="file5"><input name="" type="button" id="default-5" value="Default"/>
		    </li>
		</ul>
		<h3>PDF options</h3>
		PDF format <select id="print-format" name="">
		    <option value="a3">A3</option>
		    <option selected value="a4">A4</option>
		    <option value="a5">A5</option>
		    <option value="letter">letter</option>
		    <option value="custom">custom</option>
		</select>
		<span class="customSizeInput"><input id="customX" type="number" value="210"/>x
		    <input id="customY" type="number" value="297"/>mm
		</span>
		<br/>
		Margin <input id="print-margin" type="number" value="5"/>mm<br/>
		Orientation: <input type="radio" name="portrait" value="portrait" checked/> Portrait, <input type="radio" name="portrait" value="landscape"/> Landscape <br/>
		Card delimiter: <input type="radio" name="delimiter" value="box" checked/> Box, <input type="radio" name="delimiter" value="intersection"/> Intersection, <input type="radio" name="delimiter" value="none"/> None <br/>
		<input name="" type="button" value="Generate PDF" onclick="print()"/>
	    </div>
	</div>
	<div id="window" style="display:none">
	    <div class="close-window" onclick="hideWindows()">X</div>
	    <h3> Creation of your file</h3>
	    Your file is being created.

	    Processing card: <span id="avancement"></span><br/> <input style="display:none;" id="download" name="" type="button" value="Download PDF"/><br/><br/>

	    <h3>Submitting your file to the gallery</h3>
	    If you wish to add your creation to the gallery, fill the following form and click on "Submit to the gallery".
	    <form method="post" target="_blank" action="gallery.php">
		Name of the cards <input name="name" type="text" value=""/><br/>
		Author: <input name="author" type="text" value=""/><br/>
		Comments (optional): <input name="comment" type="text" value=""/><br/>
		<input name="source" id="json-source" type="hidden" value=""/><br/>
		<input name="new_entry" value="Submit to the gallery" type="submit"/>
	    </form>
	</div>
	<div id="window2" style="">
	    <h2>Welcome to the creation tool for the proset card game.</h2>
	    <style>
	     em {
		 font-weight: bold;
		 color: #2a9d8f;
		 font-style: normal;
		 font-size: 1.2em;
	     }
	     #window2 {}
	    </style>
	    <p>If you don't know what the proset game is, you can find <em>the rules</em> <a href="https://en.wikipedia.org/wiki/Projective_Set_(game)">here</a> or <a href="https://stacky.net/wiki/index.php?title=Projective_Set">there</a>, <em>play the game</em> <a href="https://www.ocf.berkeley.edu/~dadams/proset/">here</a>. There even is a mathematical <a href="http://homepages.warwick.ac.uk/staff/D.Maclagan/papers/set.pdf">paper</a> about it.</p>

	    <p>Using this tool, you will be able to <em>generate your own customized set of cards</em>, in the form of a <em>pdf</em> containing the set, that you can then <em>print, cut, and play</em>. Examples of such cards can be found (and modified) in the <a href="gallery.php">gallery</a></p>

	    <p>To <em>create the cards</em>, you need to choose the difficulty of the set (the number of items, if you already know the rules). Then, you need to give the system <em>an image for each of the items</em>, and arrange them in the big white rectangle, which is a preview of the card. There are <em>many options</em> you can choose, such as the size of the cards, of the paper on which you will print it, the background and the back of the cards, the delimitation of the cards to cut them more easily...</p>

	    <p>There are several ways to choose the image for the items. One is to pick some svg that you like from <a href="https://www.svgrepo.com/">svgrepo</a> or <a href="https://www.flaticon.com/">Flaticon</a>. Another is to use portraits that you extract from photos you've taken, using an image editor. <em>Be creative</em>, take inspiration from the gallery, and don't forget to <em>submit your set of cards</em> there!</p>

	    <p>Once you are ready, <input type="button" value="close" onclick="hideWindows()"> this window and start your proset!</p>

	    <p>Have fun!</p>
	    <p>Paul-Elliot</p>

	</div>
	<script src="printFromXML.js"></script>
	<script src="custom-proset.js"></script>
	<script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.js"></script>
	<script>
	 let id = window.location.search.substring(4);
	 if(id != "") {
	     let oReq = new XMLHttpRequest();
	     oReq.onload = () => {
		 loadJSON(oReq.responseText);
	     };
	     
	     oReq.open("get", id+".json", true);
	     oReq.send();
	 }
	</script>
	<a class="gh-mark" href="https://github.com/panglesd/custom-proset"><img alt="" src="GitHub-Mark-32px.png"/></a>
	<div id="svg-container" style="display:none">
	    <svg
		xmlns:dc="http://purl.org/dc/elements/1.1/"
		xmlns:cc="http://creativecommons.org/ns#"
		xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
		xmlns:svg="http://www.w3.org/2000/svg"
		xmlns="http://www.w3.org/2000/svg"
		xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
		xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
		width="320"
		height="320"
		viewBox="0 0 84.666667 84.666667"
		version="1.1"
		id="svg8"
		sodipodi:docname="blue-dot.svg"
		inkscape:version="1.0.1 (3bc2e813f5, 2020-09-07)">
		<defs
		    id="defs2" />
		<sodipodi:namedview
		    id="base"
			pagecolor="#ffffff"
			bordercolor="#666666"
			borderopacity="1.0"
			inkscape:pageopacity="0.0"
			inkscape:pageshadow="2"
			inkscape:zoom="2.2952263"
			inkscape:cx="192.98822"
			inkscape:cy="155.03916"
			inkscape:document-units="mm"
			inkscape:current-layer="layer1"
			inkscape:document-rotation="0"
			showgrid="false"
			inkscape:pagecheckerboard="true"
			units="px"
			width="320px"
			inkscape:lockguides="true"
			inkscape:window-width="1918"
			inkscape:window-height="1058"
			inkscape:window-x="0"
			inkscape:window-y="20"
			inkscape:window-maximized="1" />
		<metadata
		    id="metadata5">
		    <rdf:RDF>
			<cc:Work
			    rdf:about="">
			    <dc:format>image/svg+xml</dc:format>
			    <dc:type
				rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
			    <dc:title></dc:title>
			</cc:Work>
		    </rdf:RDF>
		</metadata>
		<g
		    inkscape:label="Calque 1"
				    inkscape:groupmode="layer"
				    id="layer1">
		    <circle
			style="opacity:1;fill:#0066ff;fill-opacity:1;stroke:#000000;stroke-width:1.01444;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
			id="path26"
			cx="42.333332"
			cy="42.333332"
			r="41.826111" />
		</g>
	    </svg>
	</div>
    </body>
</html>
